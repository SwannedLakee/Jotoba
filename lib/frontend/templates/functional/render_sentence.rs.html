@use jp_utils::furigana::reading_part_ref::ReadingPartRef;
@use jp_utils::furigana::as_part::AsPart;
@* TODO Figure out how to use Iterator instead of Vec for this template. *@
@type MyVec<'a> = Vec<ReadingPartRef<'a>>;
@(iter: MyVec, addl_classes: &str, show_furigana: bool)

<div class="furigana-kanji-container">@*
*@@for furi_part in iter {@*
    *@@if !furi_part.is_empty() {@*
            *@@if let Some(kanji) = furi_part.as_kanji() {@*
                *@<ruby>@*
                    *@<span class="kanji-preview @addl_classes">@*
                        *@@kanji@*
                    *@</span>@*
                    *@@if show_furigana {@*
                      *@<rp>（</rp>@*
                      *@<rt class="furigana-preview noselect @addl_classes">@*
                          *@@furi_part.readings().unwrap().join("")@*
                      *@</rt>@*
                      *@<rp>）</rp>@*
                    *@}@*
                *@</ruby>@*
            *@} else {@*
                *@<span class="inline-kana-preview @addl_classes">@*
                    *@@furi_part.as_kana().unwrap()@*
                *@</span>@*
            *@}@*
    *@}@*
*@}@*
*@</div>
